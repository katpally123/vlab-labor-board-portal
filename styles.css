/* Small pill labels for file inputs */
.pill-label{
  background:#f7f7f7; border:1px solid #d1d5db; padding:.25rem .5rem;
  border-radius:.375rem; font-size:.75rem; font-weight:600; cursor:pointer;
  display:flex; align-items:center;
}

/* Compact chips for the summary row */
.chip{
  padding:.25rem .5rem; background:#f3f4f6; border-radius:.375rem; font-size:.85rem;
}

/* Board tiles */
.board-card{
  border:1px solid #e5e7eb; background:#fff; border-radius: .75rem;
  /* allow cards to size naturally to their content instead of forcing equal heights */
  min-height:unset; padding:0.75rem 0.85rem; display:flex; flex-direction:column;
  /* don't force vertical stretching across the grid */
  align-self:flex-start; gap:10px; min-width:180px; box-shadow: 0 2px 6px rgba(2,6,23,0.03);
}
.board-count{ font-weight:700; font-size:1.25rem; margin-top:1rem; }

/* Tile header: label and count on same line */
.tile-header{ display:flex; align-items:center; justify-content:space-between; gap:8px; min-height:44px; }
.board-count-input{ width:64px; height:36px; padding:6px 8px; border-radius:10px; border:1px solid #eef2f6; font-weight:800; text-align:center; background:#fff; box-shadow: 0 1px 0 rgba(2,6,23,0.02); }
.board-count-input[readonly]{ background:transparent; border:none; font-weight:800; font-size:1.2rem; text-align:right; box-shadow:none; }

/* Right panel: process paths */
.proc-card{
  border:1px solid #e5e7eb; background:#fff; border-radius:.5rem; padding:.6rem .8rem;
  display:flex; justify-content:space-between; align-items:center; gap:8px; cursor:pointer;
}
.proc-card:hover{ box-shadow:0 4px 10px rgba(2,6,23,0.06); }
.proc-count{ font-weight:800; font-size:1rem; }

/* Overlapping badge strip */
.overlap-wrap{ display:flex; align-items:flex-start; flex-wrap:nowrap; overflow-x:auto; padding:8px 6px; }
.stack-column{ display:flex; flex-direction:column; gap:0; }
.badge{
  position:relative; display:flex; align-items:center; gap:12px;
  /* compact, card-like badges */
  width:100%; height:64px; padding:8px; box-sizing:border-box;
  border-radius:10px; border:1px solid rgba(0,0,0,.04);
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
  box-shadow:0 6px 14px rgba(2,6,23,0.04);
  cursor:grab; opacity:1; user-select:none; background: #fff;
}
.badge:first-child{ margin-left:0; }

/* Avatar */
.badge .avatar{ width:40px; height:40px; border-radius:9999px; background:rgba(0,0,0,0.06); flex:0 0 40px; display:flex; align-items:center; justify-content:center; color:#0f172a; font-weight:800; font-size:0.9rem; }

/* Info column */
.badge .info{ display:flex; flex-direction:column; gap:2px; flex:1 1 auto; overflow:hidden; }
.badge .info{ justify-content:center; }
.badge .info .name{ margin:0; font-size:0.95rem; line-height:1.05; font-weight:800; color:rgba(10,15,25,0.95); overflow:hidden; text-overflow:ellipsis; }
.badge .info .sub{ font-size:0.82rem; color:rgba(34,34,34,0.6); }
.badge .info .eid{ font-size:0.82rem; color:rgba(34,34,34,0.6); font-weight:600; }
.badge .info .handle{ font-size:0.78rem; color:rgba(99,99,99,0.7); }

/* Checkbox-style tick */
.badge .tick{
  width:20px; height:20px; border-radius:6px; background:#e6f7ee; color:#059669; display:flex; align-items:center; justify-content:center;
  font-weight:800; flex:0 0 20px; margin-left:6px; border:1px solid rgba(5,102,89,0.12);
  position:absolute; right:8px; top:8px;
}

/* Present state border */
.badge.present{ outline:3px solid rgba(5,150,105,0.12); }

/* Slightly larger name and compact subtext */
.badge .info .name{ font-size:1.02rem; }
.badge .info .sub, .badge .info .eid{ font-size:0.8rem; color:rgba(15,23,42,0.6); }

/* Make process cards visually distinct */
.proc-card{ padding:10px 12px; border-radius:10px; background:#ffffff; display:flex; justify-content:space-between; align-items:center; }
.proc-card .proc-count{ font-weight:800; color:#111827; }

/* Compact badge style when rendered inside board tiles / process cards */
.board-card .badge, .proc-card .badge, .badge-layer .badge{
  margin-left:0; display:inline-flex; align-items:center; padding:8px 10px; min-width:120px; max-width:180px; gap:8px;
}

/* Keep larger card appearance in the unassigned stack with vertical overlap */
#leftPanel { background: #fff; }
#unassignedStack { padding:6px; }
#unassignedStack .badge{ display:block; min-width:220px; max-width:320px; margin-top:-18px; border-radius:10px; }
#unassignedStack .badge:first-child{ margin-top:0; }
#unassignedStack .badge:hover{ transform: translateX(4px); z-index: 20; }

/* Unassigned overlay dropdown */
.unassigned-overlay{
  position:fixed; top:90px; left:20px; width:320px; max-height:70vh; background:#fff; border:1px solid #e5e7eb; border-radius:10px; box-shadow:0 10px 30px rgba(2,6,23,0.12); padding:8px; z-index:90; overflow:visible; /* let inner container scroll */
}
.unassigned-overlay .stack-column{ max-height:65vh; overflow:auto; }
.leftPanel.collapsed #unassignedStack{ display:none; }

/* Simple list items for unassigned overlay */
.unassigned-item{ padding:8px 10px; border-radius:8px; border:1px solid rgba(0,0,0,0.04); margin-bottom:8px; background:#ffffff; cursor:grab; }
.unassigned-item:active{ cursor:grabbing; }
.unassigned-item:hover{ background:#f9fafb; }

/* Show all link/button */
.more-link{ display:block; width:100%; text-align:center; padding:8px 10px; border-radius:8px; border:1px dashed rgba(0,0,0,0.06); background:#fff; color:#374151; cursor:pointer; }
.more-link:hover{ background:#f3f4f6; }

/* name text must truncate */
.avatar{ width:56px; height:56px; border-radius:9999px; background:rgba(0,0,0,0.06); display:flex; align-items:center; justify-content:center; font-weight:700; color:#0b1220; flex:0 0 56px; }

.info{ display:flex; flex-direction:column; gap:4px; overflow:hidden; min-width:0; }
.info .name{ font-weight:800; font-size:15px; color:rgba(10,15,25,0.95); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.info .shiftmeta{ font-size:12px; color:rgba(99,99,99,0.7); }
.info .eid{ font-size:11px; color:rgba(99,99,99,0.6); }

/* Barcode / handle area inside badge */
.barcodeWrap{ display:flex; flex-direction:column; gap:4px; margin-top:4px; }
.barcode{ height:18px; border-radius:4px; background:repeating-linear-gradient(90deg, #111 0 2px, #fff 2px 6px); color:transparent; font-size:10px; padding:2px 6px; }
.barcodeText{ font-size:10px; color:rgba(55,65,81,0.7); }

.badge .name{ flex:1; min-width:0; }

/* path-box (tiles) should wrap badges and not overlap */
/* Default: use a responsive grid inside each tile so badges flow side-by-side naturally.
   The grid will expand to multiple columns when there's horizontal space; single-column
   behavior happens automatically on narrow tiles. This produces side-by-side badges by default. */
.path-box{
  display:grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap:10px; align-content:start; padding:10px; border-radius:12px;
  overflow:auto; max-height: calc(72vh - 160px);
}
.path-box .badge{ margin-top:0; width:auto; max-width:100%; height:64px; padding:8px; box-sizing:border-box; }

/* When a tile has many badges, switch to a compact grid so badges flow horizontally/vertically
   instead of stretching the tile downward. JS will add/remove the `grid-mode` class per tile. */
/* legacy grid-mode kept for backward compatibility; not required because .path-box is grid by default */
/* (no-op) */
.path-box .avatar{ width:40px; height:40px; flex:0 0 40px; font-size:12px; }
.path-box .info .name{ font-size:13px; }
.path-box .info .shiftmeta{ font-size:11px; }
.path-box .info .eid{ font-size:11px; }

/* soft pastel by shift */
.badge[data-shift^="D"]{ background:#e7f0ff; }
.badge[data-shift="DB"]{ background:#e7f7ea; }
.badge[data-shift="DC"]{ background:#efe7ff; }
.badge[data-shift="DL"]{ background:#e8f4ff; }
.badge[data-shift="DH"]{ background:#fff2e6; }
.badge[data-shift^="N"]{ background:#eef6ff; }

/* presence tick on right edge */
.tick{ position:absolute; right:8px; top:50%; transform:translateY(-50%); width:22px; height:22px; border-radius:9999px; background:#059669; color:white; display:flex; align-items:center; justify-content:center; font-weight:800; font-size:12px; }

/* hover and grab cursors */
.badge:active{ cursor:grabbing; }

/* badge-layer layout inside cards: allow specific path-box rules to control layout */
.badge-layer{ display:block; }

/* Shift-code pastel backgrounds (accessible contrast for text) */
.badge.DA, .badge.NA { background:#ddeeff; color:#0a2540; }
.badge.DB, .badge.NB { background:#e3f6dc; color:#173a2f; }
.badge.DC, .badge.NC { background:#ffeedc; color:#4a2b00; }
.badge.DL, .badge.NL { background:#ece4fa; color:#241b4a; }
.badge.DN, .badge.NN { background:#fff5f0; color:#5a1f08; }
.badge.DH, .badge.NH { background:#e2e9ee; color:#102a43; }

/* Presence tick */
.badge.present{
  outline:2px solid #059669; /* emerald */
  opacity:1;
}
.badge .tick{
  position:absolute; right:-6px; top:-6px;
  background:#059669; color:white; width:16px; height:16px;
  display:flex; align-items:center; justify-content:center;
  border-radius:9999px; font-size:.7rem; font-weight:800;
}

/* Utility */
.custom-output-label { color:#ff9900; font-weight:600; }

/* Published (assignments-only) fullscreen mode */
/* In published mode we hide chrome but allow the board to scroll inside main so users
  can see all assignments. Keep body overflow hidden but make `main` the scroll container. */
body.published{ overflow:hidden; }
body.published header, body.published form, body.published #leftPanel, body.published #fileZone, body.published .chip, body.published #codesBar, body.published #plannedVolumeStub { display:none !important; }
body.published main{ width:100vw; height:100vh; padding:0; margin:0; overflow:auto; -webkit-overflow-scrolling:touch; }
body.published .grid{ grid-auto-flow:row; }
body.published .board-card{ min-height:120px; border-radius:6px; }
/* Allow individual tiles to scroll but give them slightly more space in published mode */
body.published .path-box{ max-height: calc(100vh - 140px); overflow:auto; }

/* Floating Exit Publish button when in published mode */
#exitPublishBtn{ position:fixed; right:18px; top:18px; z-index:80; }

/* Print-friendly: hide controls when printing */
@media print{
  header, form, #leftPanel, #fileZone, #exportLogBtn, #publishBtn { display:none !important; }
}

/* Responsive board grid that lets each tile size to content and wrap on small screens */
.board-grid{
  display:grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap:1rem;
  align-items:start; /* important so items don't stretch vertically */
}
